<html>
  <head >
    <title>Strava Segment Builder</title>
    <link href="/bootstrap/css/bootstrap.css" rel="stylesheet"/>
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">Segment Builder</a>
      </div>

      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="#"><img id="strava-photo" src="unknown.png"/></a></li>
        </ul>
      </div>
    </nav>
    <div class="container-fluid" style="padding-top: 100px;">
      <div class="row">
        <div class="panel panel-default">
          <div class="panel-heading">
            <div class="container">
              <div class="row">
                <div class="col-md-1">Step1:</div>
                <div class="col-md-2">
                  <a href="https://www.strava.com/oauth/authorize?client_id=1422&response_type=code&redirect_uri=http://localhost:5000/redirect&scope=write&state=random">
                    <img src="http://strava.github.io/api/images/LogInWithStrava.png"/>
                  </a>
                </div>
                <div class="col-md-9" id="strava-user"></div>
              </div>
            </div>            
          </div>
          <div class="panel-body">
          </div>
        </div>
      </div>
      <div class="row">
        <div class="panel panel-default">
          <div class="panel-heading">
            <div class="container">
              <div class="row">
                <div class="col-md-1">Step2:</div>
                <div class="col-md-2">
                  <a href="https://www.dropbox.com/1/oauth2/authorize?client_id=7kmzgqwz1ehxrwm&response_type=code&redirect_uri=http://localhost:5000/dropbox/redirect&state=random">
                    <img src="/dropbox-logos_dropbox-glyph-blue.png" height="40px"/>Login To DropBox
                  </a>
                </div>
                <div class="col-md-9" id="dropbox-user"></div>
              </div>
            </div>
          </div>
          <div class="panel-body">
          </div>
        </div>
      </div>
      <div class="row">
        <div class="panel panel-default">
          <div class="panel-heading">Step3:  Select .gpx file from Dropbox</div>
          <div class="panel-body">
            <div class="container">
              <div class="row">
                <div class="col-md-3" id="chooser"></div>
                <div class="col-md-9" id="selected"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="panel panel-default">
          <div class="panel-heading">Step4:  Select one of your favorite segments</div>
          <div class="panel-body">
            <table id="data" class="table table-striped table-condensed table-hover">
              <thead>
                <th>id</th>
                <th>name</th>
                <th>start latitude</th>
                <th>start longitude</th>
                <th>end latitude</th>
                <th>end longitude</th>
              </th>
              <tbody id="data">
              </tbody>
            </table>
          </div>
        </div> <!-- end panel -->
      </div> <!-- end row -->
      <div class="row">
        <div class="panel panel-default">
          <div class="panel-heading">Step5:  Transform the selected .gpx file</div>
          <div class="panel-body">
            <button id="generate" type="button" class="btn btn-lrg">Generate Segment GPX</button>
          </div>
        </div> <!-- end panel -->
      </div> <!-- end row -->

    </div>
    <script type="text/javascript" src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" data-app-key="5rq33exk6ndvyc3"></script>
    <script src="/jquery-1.8.3.min.js" language="javascript"></script> 
    <script src="/bootstrap/js/bootstrap.js" language="javascript"></script>
    <script type="text/javascript" src="/client.js"></script>
    <script type="text/javascript" language="javascript">strava.client.main();</script>
    <script type="text/javascript" language="javascript">
      var options = {
        success: function(files) {strava.client.filesSelected(files)},
        cancel:  function() {},
        linkType:  "direct",
        multiselect: false,
      };
      var button = Dropbox.createChooseButton(options);
      document.getElementById("chooser").appendChild(button);
    </script>
  </body>
</html>